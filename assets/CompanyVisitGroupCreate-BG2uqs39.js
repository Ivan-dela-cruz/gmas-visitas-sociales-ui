import{w as g,y as j,r as v,j as s,M as G,S as V,D as E,E as w,F}from"./index-3l9d1KGW.js";import{u as L}from"./index.esm-C1Hzu-K8.js";import{i as b}from"./companyVisitGroups-CHkjpEw5.js";import{C as A}from"./CompanyVisitGroupForm-29NRmr4N.js";import{u as D,a as R}from"./useFormLifecycle-BcTx0tZR.js";import"./TextField-ipHljcwd.js";import"./InputLabel-CWODz4nt.js";import"./FormHelperText-BXYwuqgf.js";import"./Switch-Ca-EXRJp.js";import"./CircularProgress-J6yogQxx.js";import"./useFormErrorRecovery-nUWcN-GT.js";function K(){const a=g(),{selectedCompany:o}=j(),[n,e]=v.useState(!1),{control:c,handleSubmit:u,watch:m,reset:p,formState:{errors:l}}=L({defaultValues:{code:"",name:"",description:"",status:!0}}),d=m(),{handleError:f,handleSuccess:h}=D("companyVisitGroup-form",{onSuccess:()=>{setTimeout(()=>{a("/apps/visits/groups/list")},100)}}),{showRecoveryAlert:y,clearRecoveredData:r,onSuccessSubmit:x}=R("companyVisitGroup-form-create",d,p,!1),C=async i=>{e(!0);try{const t={...i,companyId:o==null?void 0:o.companyId};await b(t),h("Grupo creado exitosamente"),x()}catch(t){f(t,i,"create")}finally{e(!1)}},S=()=>{a("/apps/visits/groups/list")};return s.jsx(G,{title:"Crear Grupo de Visitas",children:s.jsxs(V,{spacing:3,children:[s.jsx(E,{in:y,children:s.jsxs(w,{severity:"info",onClose:()=>r(),children:["Se detectaron datos guardados de un intento anterior. Los datos han sido restaurados. Puedes continuar editando o",s.jsx(F,{size:"small",sx:{ml:1},onClick:r,children:"Limpiar"})]})}),s.jsx(A,{control:c,handleSubmit:u,onSubmit:C,loading:n,onCancel:S,errors:l,isEdit:!1})]})})}export{K as default};
