import{w as S,y as g,r as j,j as s,M as v,S as G,D as V,E,F as w}from"./index-C1pIq2vl.js";import{u as F}from"./index.esm-Gj4MCmXn.js";import{i as L}from"./companyVisitGroups-BFwJnGL6.js";import{C as b}from"./CompanyVisitGroupForm-CyCzUFz1.js";import{u as A,a as D}from"./useFormLifecycle-D--FA9OL.js";import"./TextField-BpgFI3H7.js";import"./InputLabel-Bx_DgBK8.js";import"./FormHelperText-DKDoT4uR.js";import"./Switch-BdXunnT0.js";import"./CircularProgress-DEhu9n-n.js";import"./useFormErrorRecovery-DfSn2Bs0.js";function J(){const a=S(),{selectedCompany:o}=g(),[n,r]=j.useState(!1),{control:c,handleSubmit:u,watch:l,formState:{errors:m}}=F({defaultValues:{code:"",name:"",description:"",status:!0}}),p=l(),{handleError:d,handleSuccess:f}=A("companyVisitGroup-form",{onSuccess:()=>{setTimeout(()=>{a("/apps/visits/groups/list")},100)}}),{showRecoveryAlert:h,clearRecoveredData:e,onSuccessSubmit:y}=D("companyVisitGroup-form-create",p,null,!1),x=async i=>{r(!0);try{const t={...i,companyId:o==null?void 0:o.companyId};await L(t),f("Grupo creado exitosamente"),y()}catch(t){d(t,i,"create")}finally{r(!1)}},C=()=>{a("/apps/visits/groups/list")};return s.jsx(v,{title:"Crear Grupo de Visitas",children:s.jsxs(G,{spacing:3,children:[s.jsx(V,{in:h,children:s.jsxs(E,{severity:"info",onClose:()=>e(),children:["Se detectaron datos guardados de un intento anterior. Los datos han sido restaurados. Puedes continuar editando o",s.jsx(w,{size:"small",sx:{ml:1},onClick:e,children:"Limpiar"})]})}),s.jsx(b,{control:c,handleSubmit:u,onSubmit:x,loading:n,onCancel:C,errors:m,isEdit:!1})]})})}export{J as default};
