import{w as h,j as e,b7 as p,A as j,G as r,S as m,aS as f,k as l,F as g,y as b,b3 as E}from"./index-C1pIq2vl.js";import{A as v,a as O}from"./AnimateButton-BN0-O2OY.js";import{F as y,c as F,a as k}from"./formik.esm-BJieVtAb.js";import{u as w}from"./useScriptRef-BQ8okiSi.js";import{I as A}from"./InputLabel-Bx_DgBK8.js";import{F as c}from"./FormHelperText-DKDoT4uR.js";function I(){const n=w(),d=h();return e.jsx(e.Fragment,{children:e.jsx(y,{initialValues:{userOrEmail:"",submit:null},validationSchema:F().shape({userOrEmail:k().max(255).required("Usuario o correo es requerido")}),onSubmit:async(s,{setErrors:o,setStatus:i,setSubmitting:t})=>{try{await p({userOrEmail:s.userOrEmail,useToken:!0,useEmail:!1}).then(()=>{i({success:!0}),t(!1),j({open:!0,message:"Revisa tu correo para el enlace de restablecimiento",variant:"alert",alert:{color:"success"}}),setTimeout(()=>{d("/check-mail",{replace:!0})},1500)},a=>{i({success:!1}),o({submit:a.message}),t(!1)})}catch(a){console.error(a),n.current&&(i({success:!1}),o({submit:a.message}),t(!1))}},children:({errors:s,handleBlur:o,handleChange:i,handleSubmit:t,isSubmitting:a,touched:u,values:x})=>e.jsx("form",{noValidate:!0,onSubmit:t,children:e.jsxs(r,{container:!0,spacing:3,children:[e.jsxs(r,{item:!0,xs:12,children:[e.jsxs(m,{spacing:1,children:[e.jsx(A,{htmlFor:"userOrEmail-forgot",children:"Usuario o correo"}),e.jsx(f,{fullWidth:!0,error:!!(u.userOrEmail&&s.userOrEmail),id:"userOrEmail-forgot",type:"text",value:x.userOrEmail,name:"userOrEmail",onBlur:o,onChange:i,placeholder:"Ingresa tu usuario o correo",inputProps:{}})]}),u.userOrEmail&&s.userOrEmail&&e.jsx(c,{error:!0,id:"helper-text-userOrEmail-forgot",children:s.userOrEmail})]}),s.submit&&e.jsx(r,{item:!0,xs:12,children:e.jsx(c,{error:!0,children:s.submit})}),e.jsx(r,{item:!0,xs:12,sx:{mb:-2},children:e.jsx(l,{variant:"caption",children:"No olvides revisar la carpeta SPAM."})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(v,{children:e.jsx(g,{disableElevation:!0,disabled:a,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Enviar correo de restablecimiento"})})})]})})})})}function N(){const{isLoggedIn:n}=b();return e.jsx(O,{children:e.jsxs(r,{container:!0,spacing:3,children:[e.jsx(r,{item:!0,xs:12,children:e.jsxs(m,{direction:"row",justifyContent:"space-between",alignItems:"baseline",sx:{mb:{xs:-.5,sm:.5}},children:[e.jsx(l,{variant:"h3",children:"Recuperar contraseña"}),e.jsx(l,{component:E,to:n?"/auth/login":"/login",variant:"body1",sx:{textDecoration:"none"},color:"primary",children:"Volver al inicio de sesión"})]})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(I,{})})]})})}export{N as default};
