import{a4 as r,a5 as u,a6 as i,z as o}from"./index-C1pIq2vl.js";const c=e=>{const a=e==null?void 0:e.response,s=(a==null?void 0:a.data)??(e&&typeof e=="object"?e:null);return{status:(a==null?void 0:a.status)??(e==null?void 0:e.status),statusCode:(s==null?void 0:s.statusCode)??(e==null?void 0:e.statusCode),message:(s==null?void 0:s.message)||(e==null?void 0:e.message)||(typeof e=="string"?e:null),data:s}},n={key:"/v1/Companies",list:"/v1/Companies",single:e=>`/v1/Companies/${e}`,insert:"/v1/Companies",update:"/v1/Companies",delete:e=>`/v1/Companies/${e}`,byCode:e=>`/v1/Companies/code/${e}`};function f(){const{data:e,error:a,isLoading:s,mutate:t}=r(n.list,u,{revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1});return{companies:(e==null?void 0:e.data)||[],companiesLoading:s,companiesError:a,refreshCompanies:t}}function g(e){const{data:a,error:s,isLoading:t}=r(e?n.single(e):null,u,{revalidateIfStale:!0,revalidateOnMount:!0,revalidateOnFocus:!1,revalidateOnReconnect:!1});return{company:a==null?void 0:a.data,companyLoading:t,companyError:s}}async function p(e){var a;if(!e)return null;try{const s=await i.get(n.byCode(e)),t=((a=s.data)==null?void 0:a.data)??s.data??null;return t&&(t.id||t.companyId||t.code||t.companyCode)?t:null}catch(s){const{status:t,statusCode:l,message:m}=c(s);if(t===404||l==="NOT_FOUND"||l===404)return null;throw new Error(m||"Error al validar el codigo de la empresa")}}async function w(e){if(!e)throw new Error("Datos de empresa requeridos");try{const a=await i.post(n.insert,e),s=(a==null?void 0:a.data)??null,t=s!=null&&s.message?String(s.message).toLowerCase():"";if(t.includes("found")||t.includes("existe")||t.includes("exists")||t.includes("already"))throw new Error("Ya existe una compañia con este codigo");return o(n.list),(s==null?void 0:s.data)??s??null}catch(a){const{message:s}=c(a);throw new Error(s||"Error al crear la empresa")}}async function y(e){try{const a=(e==null?void 0:e.id)??(e==null?void 0:e.companyId)??null,s=await i.put(n.update,e);return o(n.list),a&&o(n.single(a)),s.data}catch(a){const{message:s}=c(a);throw new Error(s||"Error al actualizar la empresa")}}async function v(e){if(!e)throw new Error("ID de compañia requerido");try{const a=await i.delete(n.delete(e));return o(n.list),a.data}catch(a){const{message:s}=c(a);throw new Error(s||"Error al eliminar la empresa")}}export{g as a,y as b,v as d,p as g,w as i,f as u};
