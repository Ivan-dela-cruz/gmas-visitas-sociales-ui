import{w as b,av as S,r as i,A as d,j as e,B as p,k as u,S as l,F as x,O as V}from"./index-C1pIq2vl.js";import{c as T,d as D}from"./employeeSocialVisits-DdCt9qfl.js";import"./VisitForm-1seKYHd3.js";import{E as k}from"./EmployeeSocialVisitsColumns-BqJga1Oq.js";import{u as w}from"./useTabStyles-BZmkD0M8.js";import{u as I,C as B}from"./useConfirmDialog-Brskm5sG.js";import{B as A}from"./index-3EovK7LH.js";import"./VisitProfileTabs-BadFaZDw.js";import{C as N}from"./CircularProgress-DEhu9n-n.js";import{A as O}from"./ArrowLeft-REL-uIIU.js";import"./index.esm-Gj4MCmXn.js";import"./visits-yS7TV4mn.js";import"./useFormLifecycle-D--FA9OL.js";import"./useFormErrorRecovery-DfSn2Bs0.js";import"./TextField-BpgFI3H7.js";import"./InputLabel-Bx_DgBK8.js";import"./FormHelperText-DKDoT4uR.js";import"./Checkbox-BVDf5dAw.js";import"./Eye-D6moR2NK.js";import"./Edit-ByxEqKd5.js";import"./Clock-BhyZMgAP.js";const ae=()=>{const s=b(),{tabPanelStyles:g}=w(),{visit:r}=S(),t=r==null?void 0:r.id,{employeeSocialVisits:f,employeeSocialVisitsLoading:v,employeeSocialVisitsError:h}=T(t,"Validado"),{dialogState:a,openDialog:n,closeDialog:y}=I(),j=i.useCallback(()=>{s(`/apps/visits/${t}/details/create`)},[s,t]),c=i.useCallback(o=>{s(`/apps/visits/${t}/details/edit/${o.id}`)},[s,t]),m=i.useCallback(async o=>{n({title:"Eliminar Detalle",message:"¿Está seguro de eliminar este detalle de visita? Esta acción no se puede deshacer.",severity:"error",confirmText:"Eliminar",onConfirm:async()=>{try{await D(o.id,t),d({open:!0,message:"Detalle de visita eliminado exitosamente",variant:"alert",alert:{color:"success"}})}catch(E){d({open:!0,message:E.message||"Error al eliminar el detalle de visita",variant:"alert",alert:{color:"error"}})}}})},[t,n]),C=i.useMemo(()=>k({onEdit:c,onDelete:m}),[c,m]);return v?e.jsx(p,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:e.jsx(N,{})}):h?e.jsx(p,{sx:{p:3},children:e.jsx(u,{color:"error",children:"Error al cargar las visitas validadas"})}):e.jsxs(e.Fragment,{children:[e.jsxs(l,{spacing:3,sx:{...g,pt:3},children:[e.jsxs(l,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(u,{variant:"h5",children:"Visitas sociales validadas"}),e.jsxs(l,{direction:"row",spacing:2,children:[e.jsx(x,{variant:"outlined",size:"small",startIcon:e.jsx(O,{}),onClick:()=>s("/apps/visits/list"),sx:{fontWeight:600},children:"Regresar"}),e.jsx(x,{variant:"contained",size:"small",startIcon:e.jsx(V,{}),onClick:j,sx:{fontWeight:600},children:"Nuevo Detalle"})]})]}),e.jsx(A,{data:f||[],columns:C,filterOnHeaderVisible:!0,enableRowSelection:!0,tableId:"employeeSocialVisitsValidatedTable",tableNowrap:!0})]}),e.jsx(B,{open:a.open,title:a.title,message:a.message,severity:a.severity,confirmText:a.confirmText,cancelText:a.cancelText,onConfirm:a.onConfirm,onCancel:y})]})};export{ae as default};
