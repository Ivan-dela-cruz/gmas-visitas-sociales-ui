import{av as y,y as E,w as I,r as w,j as e,M as U,F as d,G as t,H as h,J as j,K as n,S as q,A as v}from"./index-8i2qIeC5.js";import{u as T,C as o}from"./index.esm-2MvEHrLl.js";import{c as W}from"./users-YDXVqnkj.js";import{A as z}from"./ArrowLeft-D7tqb4HZ.js";import{T as x}from"./TextField-hsc-s2X2.js";import{I as N}from"./InputLabel-BPE1mrZ-.js";import{C as R}from"./CircularProgress-Ba8lmjXM.js";import"./FormHelperText-DxDomcnh.js";function D(){const{inputRef:b,user:r}=y(),{user:m,updateProfile:g}=E(),u=I(),[c,f]=w.useState(!1),{control:i,handleSubmit:C,formState:{errors:l}}=T({defaultValues:{userName:(r==null?void 0:r.userName)||"",fullName:(r==null?void 0:r.fullName)||"",email:(r==null?void 0:r.email)||"",role:(r==null?void 0:r.role)||"User",isActive:(r==null?void 0:r.isActive)??!0}}),A=async s=>{f(!0);try{const a=new Date().toISOString(),S=(r==null?void 0:r.userName)||s.userName||"",p={...r,userName:s.userName,fullName:s.fullName,email:s.email,role:s.role,isActive:s.isActive,updatedAt:a,userUpdatedBy:S};delete p.password,await W(p),m&&(m.id===r.id||m.userName===r.userName)&&await g(),v({open:!0,message:"Informaci칩n actualizada exitosamente",variant:"alert",alert:{color:"success"}}),u("/apps/users/list")}catch(a){v({open:!0,message:a.message||"Error al actualizar la informaci칩n",variant:"alert",alert:{color:"error"}})}finally{f(!1)}};return e.jsx(U,{content:!1,title:"Informaci칩n Personal",secondary:e.jsx(d,{variant:"outlined",size:"small",startIcon:e.jsx(z,{}),onClick:()=>u("/apps/users/list"),sx:{fontWeight:600},children:"Regresar"}),sx:{"& .MuiInputLabel-root":{fontSize:"0.875rem"}},children:e.jsx("form",{onSubmit:C(A),children:e.jsxs(t,{container:!0,spacing:3,sx:{p:3},children:[e.jsx(t,{item:!0,xs:12,sm:6,children:e.jsx(o,{name:"userName",control:i,rules:{required:"El nombre de usuario es requerido"},render:({field:s})=>{var a;return e.jsx(x,{...s,inputRef:b,fullWidth:!0,label:"Nombre de Usuario *",error:!!l.userName,helperText:(a=l.userName)==null?void 0:a.message,disabled:!0})}})}),e.jsx(t,{item:!0,xs:12,sm:6,children:e.jsx(o,{name:"fullName",control:i,rules:{required:"El nombre completo es requerido"},render:({field:s})=>{var a;return e.jsx(x,{...s,fullWidth:!0,label:"Nombre Completo *",error:!!l.fullName,helperText:(a=l.fullName)==null?void 0:a.message})}})}),e.jsx(t,{item:!0,xs:12,sm:6,children:e.jsx(o,{name:"email",control:i,rules:{required:"El email es requerido",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Email inv치lido"}},render:({field:s})=>{var a;return e.jsx(x,{...s,fullWidth:!0,label:"Email *",type:"email",error:!!l.email,helperText:(a=l.email)==null?void 0:a.message})}})}),e.jsx(t,{item:!0,xs:12,sm:6,children:e.jsx(o,{name:"role",control:i,render:({field:s})=>e.jsxs(h,{fullWidth:!0,children:[e.jsx(N,{children:"Rol"}),e.jsxs(j,{...s,label:"Rol",children:[e.jsx(n,{value:"Admin",children:"Admin"}),e.jsx(n,{value:"User",children:"User"})]})]})})}),e.jsx(t,{item:!0,xs:12,sm:6,children:e.jsx(o,{name:"isActive",control:i,render:({field:s})=>e.jsxs(h,{fullWidth:!0,children:[e.jsx(N,{children:"Estado"}),e.jsxs(j,{...s,label:"Estado",value:s.value?"true":"false",onChange:a=>s.onChange(a.target.value==="true"),children:[e.jsx(n,{value:"true",children:"Activo"}),e.jsx(n,{value:"false",children:"Inactivo"})]})]})})}),e.jsx(t,{item:!0,xs:12,children:e.jsxs(q,{direction:"row",justifyContent:"flex-end",spacing:2,children:[e.jsx(d,{variant:"outlined",color:"secondary",disabled:c,onClick:()=>u("/apps/users/list"),children:"Cancelar"}),e.jsx(d,{type:"submit",variant:"contained",disabled:c,children:c?e.jsx(R,{size:24}):"Guardar Cambios"})]})})]})})})}export{D as default};
