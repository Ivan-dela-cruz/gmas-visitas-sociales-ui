import{w as f,j as e,b7 as j,A as b,G as r,S as m,aS as g,k as u,F as v,y,b3 as F}from"./index-1Ft_9Ggc.js";import{A as k,a as w}from"./AnimateButton-DtPscSAZ.js";import{F as A,c as R,a as I}from"./formik.esm-Ccvq2yYd.js";import{u as S}from"./useScriptRef-DeQqTqfZ.js";import{I as P}from"./InputLabel-CmXrBjAs.js";import{F as l}from"./FormHelperText-RF1wYTFR.js";function T(){const o=S(),d=f();return e.jsx(e.Fragment,{children:e.jsx(A,{initialValues:{username:"",submit:null},validationSchema:R().shape({username:I().max(255).required("El nombre de usuario es requerido")}),onSubmit:async(s,{setErrors:i,setStatus:t,setSubmitting:n})=>{try{await j({userOrEmail:s.username,useToken:!0,useEmail:!1}).then(()=>{t({success:!0}),n(!1),b({open:!0,message:"Se ha enviado un correo con las instrucciones para restablecer tu contraseña",variant:"alert",alert:{color:"success"}}),setTimeout(()=>{d("/check-mail",{replace:!0})},1500)},a=>{t({success:!1}),i({submit:a.message}),n(!1)})}catch(a){o.current&&(t({success:!1}),i({submit:a.message}),n(!1))}},children:({errors:s,handleBlur:i,handleSubmit:t,isSubmitting:n,touched:a,values:c,setFieldValue:p})=>e.jsx("form",{noValidate:!0,onSubmit:t,children:e.jsxs(r,{container:!0,spacing:3,children:[e.jsxs(r,{item:!0,xs:12,children:[e.jsxs(m,{spacing:1,children:[e.jsx(P,{htmlFor:"username-forgot",children:"Nombre de Usuario"}),e.jsx(g,{fullWidth:!0,error:!!(a.username&&s.username),id:"username-forgot",type:"text",value:c.username,name:"username",onBlur:i,onChange:x=>{const h=x.target.value.toUpperCase();p("username",h)},placeholder:"Ingresa tu nombre de usuario",inputProps:{style:{textTransform:"uppercase"}}})]}),a.username&&s.username&&e.jsx(l,{error:!0,id:"helper-text-username-forgot",children:s.username})]}),s.submit&&e.jsx(r,{item:!0,xs:12,children:e.jsx(l,{error:!0,children:s.submit})}),e.jsx(r,{item:!0,xs:12,sx:{mb:-2},children:e.jsx(u,{variant:"caption",children:"Recibirás un correo con las instrucciones. No olvides revisar la carpeta SPAM."})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(k,{children:e.jsx(v,{disableElevation:!0,disabled:n||!c.username.trim(),fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Restablecer Contraseña"})})})]})})})})}function W(){const{isLoggedIn:o}=y();return e.jsx(w,{children:e.jsxs(r,{container:!0,spacing:3,children:[e.jsx(r,{item:!0,xs:12,children:e.jsxs(m,{direction:"row",justifyContent:"space-between",alignItems:"baseline",sx:{mb:{xs:-.5,sm:.5}},children:[e.jsx(u,{variant:"h3",children:"Recuperar contraseña"}),e.jsx(u,{component:F,to:o?"/auth/login":"/login",variant:"body1",sx:{textDecoration:"none"},color:"primary",children:"Volver al inicio de sesión"})]})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(T,{})})]})})}export{W as default};
