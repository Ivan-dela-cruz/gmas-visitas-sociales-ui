import{w as v,av as E,r as a,A as p,j as e,B as d,k as u,S as l,F as b}from"./index-BBOMs4x0.js";import{c as S,d as T}from"./employeeSocialVisits-JrWr5qVw.js";import"./VisitForm-cJvMhfws.js";import{E as V}from"./EmployeeSocialVisitsColumns-IPxuj48A.js";import{u as w}from"./useTabStyles-Bjh__-cn.js";import{u as D,C as k}from"./useConfirmDialog-CP9EJ8Ez.js";import{B}from"./index-CI8pVIC0.js";import"./VisitProfileTabs-B3_lN_gn.js";import{C as I}from"./CircularProgress-DmhgOtZc.js";import{A}from"./ArrowLeft-Lm94XBrk.js";import"./index.esm-DFJp81p7.js";import"./visits-CLpfAg0C.js";import"./useFormLifecycle-DF1_x0WF.js";import"./useFormErrorRecovery-BkeCmwwC.js";import"./TextField-CXDNqN6f.js";import"./InputLabel-SSW_zhyd.js";import"./FormHelperText-BS5u7Ss6.js";import"./Checkbox-qfgNk2yr.js";import"./Eye-BDzpwBI8.js";import"./Edit-BOKxowI6.js";import"./Clock-B2qjJ22q.js";const ee=()=>{const s=v(),{tabPanelStyles:f}=w(),{visit:r}=E(),i=r==null?void 0:r.id,{employeeSocialVisits:x,employeeSocialVisitsLoading:g,employeeSocialVisitsError:y}=S(i,"Confirmado"),{dialogState:t,openDialog:n,closeDialog:C}=D();a.useCallback(()=>{s(`/apps/visits/${i}/details/create`)},[s,i]);const c=a.useCallback(o=>{s(`/apps/visits/${i}/details/edit/${o.id}`)},[s,i]),m=a.useCallback(async o=>{n({title:"Eliminar Detalle",message:"¿Está seguro de eliminar este detalle de visita? Esta acción no se puede deshacer.",severity:"error",confirmText:"Eliminar",onConfirm:async()=>{try{await T(o.id,i),p({open:!0,message:"Detalle de visita eliminado exitosamente",variant:"alert",alert:{color:"success"}})}catch(j){p({open:!0,message:j.message||"Error al eliminar el detalle de visita",variant:"alert",alert:{color:"error"}})}}})},[i,n]),h=a.useMemo(()=>V({onEdit:c,onDelete:m}),[c,m]);return g?e.jsx(d,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:e.jsx(I,{})}):y?e.jsx(d,{sx:{p:3},children:e.jsx(u,{color:"error",children:"Error al cargar las visitas confirmadas"})}):e.jsxs(e.Fragment,{children:[e.jsxs(l,{spacing:3,sx:{...f,pt:3},children:[e.jsxs(l,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(u,{variant:"h5",children:"Visitas sociales confirmadas"}),e.jsx(l,{direction:"row",spacing:2,children:e.jsx(b,{variant:"outlined",size:"small",startIcon:e.jsx(A,{}),onClick:()=>s("/apps/visits/list"),sx:{fontWeight:600},children:"Regresar"})})]}),e.jsx(B,{data:x||[],columns:h,filterOnHeaderVisible:!0,enableRowSelection:!0,tableId:"employeeSocialVisitsConfirmedTable",tableNowrap:!0})]}),e.jsx(k,{open:t.open,title:t.title,message:t.message,severity:t.severity,confirmText:t.confirmText,cancelText:t.cancelText,onConfirm:t.onConfirm,onCancel:C})]})};export{ee as default};
