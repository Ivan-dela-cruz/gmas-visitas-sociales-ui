import{w as S,y as g,r as j,j as s,M as v,S as G,D as V,E,F as w}from"./index-BBOMs4x0.js";import{u as F}from"./index.esm-DFJp81p7.js";import{i as L}from"./companyVisitGroups-r2zgvtwb.js";import{C as b}from"./CompanyVisitGroupForm-BIlR_wvn.js";import{u as A,a as D}from"./useFormLifecycle-DF1_x0WF.js";import"./TextField-CXDNqN6f.js";import"./InputLabel-SSW_zhyd.js";import"./FormHelperText-BS5u7Ss6.js";import"./Switch-Du74AAMO.js";import"./CircularProgress-DmhgOtZc.js";import"./useFormErrorRecovery-BkeCmwwC.js";function J(){const a=S(),{selectedCompany:o}=g(),[n,r]=j.useState(!1),{control:c,handleSubmit:u,watch:l,formState:{errors:m}}=F({defaultValues:{code:"",name:"",description:"",status:!0}}),p=l(),{handleError:d,handleSuccess:f}=A("companyVisitGroup-form",{onSuccess:()=>{setTimeout(()=>{a("/apps/visits/groups/list")},100)}}),{showRecoveryAlert:h,clearRecoveredData:e,onSuccessSubmit:y}=D("companyVisitGroup-form-create",p,null,!1),x=async i=>{r(!0);try{const t={...i,companyId:o==null?void 0:o.companyId};await L(t),f("Grupo creado exitosamente"),y()}catch(t){d(t,i,"create")}finally{r(!1)}},C=()=>{a("/apps/visits/groups/list")};return s.jsx(v,{title:"Crear Grupo de Visitas",children:s.jsxs(G,{spacing:3,children:[s.jsx(V,{in:h,children:s.jsxs(E,{severity:"info",onClose:()=>e(),children:["Se detectaron datos guardados de un intento anterior. Los datos han sido restaurados. Puedes continuar editando o",s.jsx(w,{size:"small",sx:{ml:1},onClick:e,children:"Limpiar"})]})}),s.jsx(b,{control:c,handleSubmit:u,onSubmit:x,loading:n,onCancel:C,errors:m,isEdit:!1})]})})}export{J as default};
