import{r as h,y as S,j as e,b2 as I,a5 as L,G as s,S as d,aS as x,b1 as F,I as B,a7 as P,k as u,b3 as W,E as q,F as D,P as T,b4 as U}from"./index-1Ft_9Ggc.js";import{L as M,A as R}from"./AuthDivider-0b-C8xD7.js";import{A as $,a as z}from"./AnimateButton-DtPscSAZ.js";import{F as G,c as V,a as g}from"./formik.esm-Ccvq2yYd.js";import{u as H}from"./useScriptRef-DeQqTqfZ.js";import{I as j}from"./InputLabel-CmXrBjAs.js";import{F as f}from"./FormHelperText-RF1wYTFR.js";import{E as J}from"./Eye-f_-KHjj9.js";import{E as K}from"./EyeSlash-C7QqWtTi.js";import{C as N}from"./Checkbox-DqjWukHG.js";function w({forgot:b}){const[E,y]=h.useState(!1),{login:O}=S(),m=H(),[l,v]=h.useState(!1),C=()=>{v(!l)},k=r=>{r.preventDefault()};return e.jsx(e.Fragment,{children:e.jsx(G,{initialValues:{userOrEmail:"",password:"",submit:null},validationSchema:V().shape({userOrEmail:g().max(50).required("El usuario es requerido"),password:g().max(255).required("La contraseña es requerida")}),onSubmit:async(r,{setErrors:a,setStatus:t,setSubmitting:i})=>{try{a({submit:null}),t({success:!1}),await O((r.userOrEmail||"").toUpperCase(),r.password),m.current&&(t({success:!0}),i(!1),I("v1/ApplicationSettings/menu/dashboard",L))}catch(o){console.log("Error de login capturado:",o.message),m.current&&(t({success:!1}),a({submit:o.message}),i(!1))}},children:({errors:r,handleBlur:a,handleChange:t,handleSubmit:i,isSubmitting:o,touched:n,values:p,setFieldValue:A})=>e.jsx("form",{noValidate:!0,onSubmit:i,children:e.jsxs(s,{container:!0,spacing:3,children:[e.jsxs(s,{item:!0,xs:12,children:[e.jsxs(d,{spacing:1,children:[e.jsx(j,{htmlFor:"userOrEmail-login",children:"Usuario"}),e.jsx(x,{id:"userOrEmail-login",type:"text",value:p.userOrEmail,name:"userOrEmail",onBlur:a,onChange:c=>{A("userOrEmail",(c.target.value||"").toUpperCase())},placeholder:"Ingrese su usuario",fullWidth:!0,error:!!(n.userOrEmail&&r.userOrEmail)})]}),n.userOrEmail&&r.userOrEmail&&e.jsx(f,{error:!0,id:"standard-weight-helper-text-userOrEmail-login",children:r.userOrEmail})]}),e.jsxs(s,{item:!0,xs:12,children:[e.jsxs(d,{spacing:1,children:[e.jsx(j,{htmlFor:"password-login",children:"Contraseña"}),e.jsx(x,{fullWidth:!0,error:!!(n.password&&r.password),id:"-password-login",type:l?"text":"password",value:p.password,name:"password",onBlur:a,onChange:t,endAdornment:e.jsx(F,{position:"end",children:e.jsx(B,{"aria-label":"toggle password visibility",onClick:C,onMouseDown:k,edge:"end",color:"secondary",children:l?e.jsx(J,{}):e.jsx(K,{})})}),placeholder:"Ingrese su contraseña"})]}),n.password&&r.password&&e.jsx(f,{error:!0,id:"standard-weight-helper-text-password-login",children:r.password})]}),e.jsx(s,{item:!0,xs:12,sx:{mt:-1},children:e.jsxs(d,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,children:[e.jsx(P,{control:e.jsx(N,{checked:E,onChange:c=>y(c.target.checked),name:"checked",color:"primary",size:"small"}),label:e.jsx(u,{variant:"h6",children:"Mantenerme conectado"})}),e.jsx(M,{variant:"h6",component:W,to:b||"/auth/forgot-password",color:"text.primary",children:"¿Olvidaste tu contraseña?"})]})}),r.submit&&e.jsx(s,{item:!0,xs:12,children:e.jsx(q,{severity:"error",sx:{mb:2,backgroundColor:"#ffebee",borderLeft:"4px solid #f44336"},children:e.jsx(u,{variant:"body2",sx:{fontWeight:500,color:"#c62828"},children:r.submit||"Usuario o contraseña incorrectos"})})}),e.jsx(s,{item:!0,xs:12,children:e.jsx($,{children:e.jsx(D,{disableElevation:!0,disabled:o,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Iniciar sesión"})})})]})})})})}w.propTypes={forgot:T.string};function ie(){return e.jsx(z,{children:e.jsxs(s,{container:!0,spacing:3,children:[e.jsx(s,{item:!0,xs:12,sx:{textAlign:"center"},children:e.jsx(U,{})}),e.jsx(s,{item:!0,xs:12,children:e.jsx(R,{children:e.jsx(u,{variant:"h3",children:"Bienvenidos"})})}),e.jsx(s,{item:!0,xs:12,children:e.jsx(w,{forgot:"/auth/forgot-password"})})]})})}export{ie as default};
