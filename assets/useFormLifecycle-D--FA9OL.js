import{ax as p,r as s,a3 as v,a2 as E,ay as f}from"./index-C1pIq2vl.js";import{u as y}from"./useFormErrorRecovery-DfSn2Bs0.js";function D(r,{onSuccess:t,onError:c,onRetry:o}={}){const{addError:b}=p(),n=s.useRef(0),u=3,l=s.useCallback((e,a={})=>{var S,C;console.error(`[${r}] Error:`,{message:e.message,status:(S=e.response)==null?void 0:S.status,timestamp:new Date().toISOString(),context:a}),b({message:e.message,statusCode:((C=e.response)==null?void 0:C.status)||500,formId:r,timestamp:new Date().toISOString(),context:a})},[r,b]),i=s.useCallback((e,a=null,S="unknown")=>{const C=e.message||"Error en la operaciÃ³n";return l(e,{operation:S,data:a}),v(C,o?()=>o(a):null,e.details||null),c&&c(e,a),{errorId:Date.now(),message:C,data:a,operation:S}},[l,o,c]),R=s.useCallback((e,a=null)=>{console.log(`[${r}] Success:`,e,a),E(e),t&&t(a)},[r,t]),k=s.useCallback(e=>{console.warn(`[${r}] Warning:`,e),f(e)},[r]),g=s.useCallback(()=>{n.current=0},[]),m=s.useCallback(()=>(n.current+=1,n.current<=u),[]);return{handleError:i,handleSuccess:R,handleWarning:k,logError:l,resetRetryCount:g,incrementRetryCount:m,canRetry:()=>n.current<u,retryCount:n.current}}function F(r,t,c,o=!1){const[b,n]=s.useState(!1),{saveFormDataForRecovery:u,getRecoveredData:l,clearRecoveredData:i}=y(r,t);s.useEffect(()=>{if(!o){const g=l();g&&(n(!0),c(g))}},[o,c,l]),s.useEffect(()=>{u(t)},[t,u]);const R=s.useCallback(()=>{n(!1),i()},[i]),k=s.useCallback(()=>{i()},[i]);return{showRecoveryAlert:b,setShowRecoveryAlert:n,clearRecoveredData:R,onSuccessSubmit:k,saveFormData:u}}export{F as a,D as u};
