import{av as N,w as C,r as A,j as e,M as E,F as u,G as l,H as f,J as h,K as o,S,A as j}from"./index-C1pIq2vl.js";import{u as y,C as n}from"./index.esm-Gj4MCmXn.js";import{c as I}from"./users-DtXYsbxr.js";import{A as q}from"./ArrowLeft-REL-uIIU.js";import{T as c}from"./TextField-BpgFI3H7.js";import{I as p}from"./InputLabel-Bx_DgBK8.js";import{C as T}from"./CircularProgress-DEhu9n-n.js";import"./FormHelperText-DKDoT4uR.js";function M(){const{inputRef:v,user:s}=N(),d=C(),[m,x]=A.useState(!1),{control:i,handleSubmit:b,formState:{errors:t}}=y({defaultValues:{userName:(s==null?void 0:s.userName)||"",fullName:(s==null?void 0:s.fullName)||"",email:(s==null?void 0:s.email)||"",role:(s==null?void 0:s.role)||"User",isActive:(s==null?void 0:s.isActive)??!0}}),g=async r=>{x(!0);try{await I({id:s.id,userName:r.userName,fullName:r.fullName,email:r.email,role:r.role,isActive:r.isActive}),j({open:!0,message:"Informaci칩n actualizada exitosamente",variant:"alert",alert:{color:"success"}})}catch(a){j({open:!0,message:a.message||"Error al actualizar la informaci칩n",variant:"alert",alert:{color:"error"}})}finally{x(!1)}};return e.jsx(E,{content:!1,title:"Informaci칩n Personal",secondary:e.jsx(u,{variant:"outlined",size:"small",startIcon:e.jsx(q,{}),onClick:()=>d("/apps/users/list"),sx:{fontWeight:600},children:"Regresar"}),sx:{"& .MuiInputLabel-root":{fontSize:"0.875rem"}},children:e.jsx("form",{onSubmit:b(g),children:e.jsxs(l,{container:!0,spacing:3,sx:{p:3},children:[e.jsx(l,{item:!0,xs:12,sm:6,children:e.jsx(n,{name:"userName",control:i,rules:{required:"El nombre de usuario es requerido"},render:({field:r})=>{var a;return e.jsx(c,{...r,inputRef:v,fullWidth:!0,label:"Nombre de Usuario *",error:!!t.userName,helperText:(a=t.userName)==null?void 0:a.message,disabled:!0})}})}),e.jsx(l,{item:!0,xs:12,sm:6,children:e.jsx(n,{name:"fullName",control:i,rules:{required:"El nombre completo es requerido"},render:({field:r})=>{var a;return e.jsx(c,{...r,fullWidth:!0,label:"Nombre Completo *",error:!!t.fullName,helperText:(a=t.fullName)==null?void 0:a.message})}})}),e.jsx(l,{item:!0,xs:12,sm:6,children:e.jsx(n,{name:"email",control:i,rules:{required:"El email es requerido",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Email inv치lido"}},render:({field:r})=>{var a;return e.jsx(c,{...r,fullWidth:!0,label:"Email *",type:"email",error:!!t.email,helperText:(a=t.email)==null?void 0:a.message})}})}),e.jsx(l,{item:!0,xs:12,sm:6,children:e.jsx(n,{name:"role",control:i,render:({field:r})=>e.jsxs(f,{fullWidth:!0,children:[e.jsx(p,{children:"Rol"}),e.jsxs(h,{...r,label:"Rol",children:[e.jsx(o,{value:"Admin",children:"Admin"}),e.jsx(o,{value:"User",children:"User"})]})]})})}),e.jsx(l,{item:!0,xs:12,sm:6,children:e.jsx(n,{name:"isActive",control:i,render:({field:r})=>e.jsxs(f,{fullWidth:!0,children:[e.jsx(p,{children:"Estado"}),e.jsxs(h,{...r,label:"Estado",value:r.value?"true":"false",onChange:a=>r.onChange(a.target.value==="true"),children:[e.jsx(o,{value:"true",children:"Activo"}),e.jsx(o,{value:"false",children:"Inactivo"})]})]})})}),e.jsx(l,{item:!0,xs:12,children:e.jsxs(S,{direction:"row",justifyContent:"flex-end",spacing:2,children:[e.jsx(u,{variant:"outlined",color:"secondary",disabled:m,onClick:()=>d("/apps/users/list"),children:"Cancelar"}),e.jsx(u,{type:"submit",variant:"contained",disabled:m,children:m?e.jsx(T,{size:24}):"Guardar Cambios"})]})})]})})})}export{M as default};
