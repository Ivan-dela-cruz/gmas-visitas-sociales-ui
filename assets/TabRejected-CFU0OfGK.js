import{w as b,av as S,r as i,A as p,j as e,B as d,k as u,S as l,F as x,O as T}from"./index-pwr-e4Ht.js";import{c as D,d as V}from"./employeeSocialVisits-c4ueEouQ.js";import"./VisitForm-BjTRCMU7.js";import{E as k}from"./EmployeeSocialVisitsColumns-ZlaCa22z.js";import{u as w}from"./useTabStyles-BQ3ZO2iQ.js";import{u as I,C as R}from"./useConfirmDialog-B93jbB1J.js";import{B as z}from"./index-tO21-Ypv.js";import"./VisitProfileTabs-CnhuvhAO.js";import{C as B}from"./CircularProgress-JbuhKxWk.js";import{A}from"./ArrowLeft-D0sQWMEh.js";import"./index.esm-B6J6p8Kq.js";import"./visits-D1Hu5OOQ.js";import"./useFormLifecycle-CZby2H_e.js";import"./useFormErrorRecovery-BnbLE14Q.js";import"./TextField-ChEHFDDT.js";import"./InputLabel-BRdiyk76.js";import"./FormHelperText-vhUhcK_2.js";import"./Checkbox-Bo108QjW.js";import"./Eye-QPsMaacY.js";import"./Edit-Cbs_uhS6.js";import"./Clock-BRUivnXR.js";const se=()=>{const a=b(),{tabPanelStyles:g}=w(),{visit:r}=S(),t=r==null?void 0:r.id,{employeeSocialVisits:f,employeeSocialVisitsLoading:h,employeeSocialVisitsError:j}=D(t,"Rechazado"),{dialogState:s,openDialog:n,closeDialog:y}=I(),v=i.useCallback(()=>{a(`/apps/visits/${t}/details/create`)},[a,t]),c=i.useCallback(o=>{a(`/apps/visits/${t}/details/edit/${o.id}`)},[a,t]),m=i.useCallback(async o=>{n({title:"Eliminar Detalle",message:"¿Está seguro de eliminar este detalle de visita? Esta acción no se puede deshacer.",severity:"error",confirmText:"Eliminar",onConfirm:async()=>{try{await V(o.id,t),p({open:!0,message:"Detalle de visita eliminado exitosamente",variant:"alert",alert:{color:"success"}})}catch(E){p({open:!0,message:E.message||"Error al eliminar el detalle de visita",variant:"alert",alert:{color:"error"}})}}})},[t,n]),C=i.useMemo(()=>k({onEdit:c,onDelete:m}),[c,m]);return h?e.jsx(d,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:e.jsx(B,{})}):j?e.jsx(d,{sx:{p:3},children:e.jsx(u,{color:"error",children:"Error al cargar las visitas rechazadas"})}):e.jsxs(e.Fragment,{children:[e.jsxs(l,{spacing:3,sx:{...g,pt:3},children:[e.jsxs(l,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(u,{variant:"h5",children:"Visitas sociales rechazadas"}),e.jsxs(l,{direction:"row",spacing:2,children:[e.jsx(x,{variant:"outlined",size:"small",startIcon:e.jsx(A,{}),onClick:()=>a("/apps/visits/list"),sx:{fontWeight:600},children:"Regresar"}),e.jsx(x,{variant:"contained",size:"small",startIcon:e.jsx(T,{}),onClick:v,sx:{fontWeight:600},children:"Nuevo Detalle"})]})]}),e.jsx(z,{data:f||[],columns:C,filterOnHeaderVisible:!0,enableRowSelection:!0,tableId:"employeeSocialVisitsRejectedTable",tableNowrap:!0})]}),e.jsx(R,{open:s.open,title:s.title,message:s.message,severity:s.severity,confirmText:s.confirmText,cancelText:s.cancelText,onConfirm:s.onConfirm,onCancel:y})]})};export{se as default};
